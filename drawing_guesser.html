<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Drawing Guesser - AI for Good</title>
    <script src="https://cdn.jsdelivr.net/npm/@tensorflow/tfjs"></script>
    <script src="https://cdn.jsdelivr.net/npm/@tensorflow-models/mobilenet"></script>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            display: flex;
            flex-direction: column;
            align-items: center;
            padding: 2rem;
        }

        .home-button {
            position: fixed;
            top: 2rem;
            left: 2rem;
            background: white;
            color: #667eea;
            padding: 0.8rem 1.5rem;
            border-radius: 25px;
            text-decoration: none;
            font-weight: bold;
            box-shadow: 0 5px 15px rgba(0,0,0,0.2);
            transition: transform 0.3s ease;
            z-index: 1000;
        }

        .home-button:hover {
            transform: translateY(-3px);
        }

        .container {
            max-width: 1200px;
            width: 100%;
        }

        h1 {
            color: white;
            text-align: center;
            font-size: 2.5rem;
            margin-bottom: 1rem;
        }

        .subtitle {
            color: white;
            text-align: center;
            font-size: 1.3rem;
            margin-bottom: 2rem;
            opacity: 0.9;
        }

        .main-content {
            display: grid;
            grid-template-columns: 2fr 1fr;
            gap: 2rem;
            margin-bottom: 2rem;
        }

        .drawing-section {
            background: white;
            border-radius: 15px;
            padding: 2rem;
            box-shadow: 0 10px 30px rgba(0,0,0,0.2);
        }

        .challenge {
            background: #667eea;
            color: white;
            padding: 1.5rem;
            border-radius: 10px;
            text-align: center;
            margin-bottom: 1.5rem;
        }

        .challenge h2 {
            font-size: 1.8rem;
            margin-bottom: 0.5rem;
        }

        .challenge-object {
            font-size: 2.5rem;
            font-weight: bold;
        }

        .canvas-container {
            position: relative;
            background: white;
            border: 3px solid #667eea;
            border-radius: 10px;
            overflow: hidden;
            margin-bottom: 1rem;
        }

        #drawingCanvas {
            display: block;
            cursor: crosshair;
            touch-action: none;
        }

        .controls {
            display: flex;
            gap: 1rem;
            flex-wrap: wrap;
        }

        .btn {
            flex: 1;
            padding: 1rem;
            border: none;
            border-radius: 10px;
            font-size: 1.1rem;
            font-weight: bold;
            cursor: pointer;
            transition: transform 0.2s ease;
        }

        .btn:hover {
            transform: translateY(-2px);
        }

        .btn-primary {
            background: #667eea;
            color: white;
        }

        .btn-secondary {
            background: #f0f0f0;
            color: #333;
        }

        .results-section {
            background: white;
            border-radius: 15px;
            padding: 2rem;
            box-shadow: 0 10px 30px rgba(0,0,0,0.2);
        }

        .results-section h2 {
            color: #667eea;
            margin-bottom: 1rem;
            font-size: 1.8rem;
        }

        .prediction {
            background: #f8f9fa;
            padding: 1rem;
            border-radius: 8px;
            margin-bottom: 0.8rem;
        }

        .prediction-item {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 0.5rem 0;
        }

        .prediction-label {
            font-weight: bold;
            color: #333;
        }

        .prediction-confidence {
            color: #667eea;
            font-size: 0.9rem;
        }

        .result-message {
            text-align: center;
            padding: 1.5rem;
            border-radius: 10px;
            font-size: 1.3rem;
            font-weight: bold;
            margin-top: 1rem;
        }

        .result-correct {
            background: #d4edda;
            color: #155724;
        }

        .result-incorrect {
            background: #f8d7da;
            color: #721c24;
        }

        .status {
            text-align: center;
            padding: 1rem;
            margin-top: 1rem;
            background: #f0f0f0;
            border-radius: 10px;
            font-size: 1.1rem;
            color: #667eea;
            font-weight: bold;
        }

        .info-section {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 1.5rem;
            margin-top: 2rem;
        }

        .info-card {
            background: white;
            border-radius: 15px;
            padding: 1.5rem;
            box-shadow: 0 10px 30px rgba(0,0,0,0.2);
        }

        .info-card h3 {
            color: #667eea;
            margin-bottom: 0.8rem;
            font-size: 1.3rem;
        }

        .info-card p {
            color: #666;
            line-height: 1.6;
            font-size: 1rem;
        }

        @media (max-width: 768px) {
            .main-content {
                grid-template-columns: 1fr;
            }

            h1 {
                font-size: 2rem;
            }

            .home-button {
                top: 1rem;
                left: 1rem;
                padding: 0.6rem 1rem;
                font-size: 0.9rem;
            }
        }
    </style>
</head>
<body>
    <a href="index.html" class="home-button">‚Üê Home</a>

    <div class="container">
        <h1>üé® Drawing Guesser</h1>
        <p class="subtitle">Draw the object and see if AI can guess what it is!</p>

        <div class="main-content">
            <div class="drawing-section">
                <div class="challenge">
                    <h2>Draw this:</h2>
                    <div class="challenge-object" id="challengeObject">Loading...</div>
                </div>

                <div class="canvas-container">
                    <canvas id="drawingCanvas" width="500" height="500"></canvas>
                </div>

                <div class="controls">
                    <button class="btn btn-secondary" onclick="clearCanvas()">Clear Canvas</button>
                    <button class="btn btn-primary" onclick="guessDrawing()">Guess My Drawing</button>
                    <button class="btn btn-secondary" onclick="newChallenge()">New Challenge</button>
                </div>

                <div class="status" id="status">Loading AI...</div>
            </div>

            <div class="results-section">
                <h2>ü§ñ AI Guesses</h2>
                <div id="predictions">
                    <p style="color: #999; text-align: center; padding: 2rem;">Draw something and click "Guess My Drawing"!</p>
                </div>
                <div id="resultMessage"></div>
            </div>
        </div>

        <div class="info-section">
            <div class="info-card">
                <h3>1Ô∏è‚É£ Get a Challenge</h3>
                <p>You'll be asked to draw an object like a cat, tree, or car!</p>
            </div>

            <div class="info-card">
                <h3>2Ô∏è‚É£ Draw It!</h3>
                <p>Use your mouse or finger to draw on the canvas. Be creative!</p>
            </div>

            <div class="info-card">
                <h3>3Ô∏è‚É£ AI Guesses</h3>
                <p>The AI will try to recognize your drawing. Can you fool it?</p>
            </div>

            <div class="info-card">
                <h3>üß† Pattern Recognition</h3>
                <p>AI has learned from millions of images to recognize shapes, lines, and patterns.</p>
            </div>

            <div class="info-card">
                <h3>üîó Neural Networks</h3>
                <p>The AI uses layers of "neurons" that work together, similar to how our brain processes images!</p>
            </div>

            <div class="info-card">
                <h3>üåç Real-World Uses</h3>
                <p>This technology helps self-driving cars see roads, doctors detect diseases, and more!</p>
            </div>
        </div>
    </div>

    <script>
        const canvas = document.getElementById('drawingCanvas');
        const ctx = canvas.getContext('2d');
        let isDrawing = false;
        let model = null;
        let currentChallenge = '';

        // Expanded list of objects to draw
        const drawingChallenges = [
            'cat', 'dog', 'car', 'tree', 'house', 'flower', 'sun', 'star',
            'bird', 'fish', 'boat', 'airplane', 'bicycle', 'chair', 'table',
            'computer', 'phone', 'apple', 'banana', 'pizza', 'cake', 'cup',
            'shoe', 'hat', 'shirt', 'book', 'clock', 'guitar', 'piano',
            'umbrella', 'pencil', 'scissors', 'camera', 'television', 'door',
            'window', 'moon', 'cloud', 'rainbow', 'mountain', 'ocean', 'beach',
            'snowman', 'heart', 'face', 'hand', 'eye', 'butterfly', 'spider',
            'snake', 'elephant', 'giraffe', 'lion', 'monkey', 'rabbit', 'bear',
            'horse', 'cow', 'pig', 'chicken', 'duck', 'frog', 'turtle',
            'rocket', 'robot', 'castle', 'bridge', 'lighthouse', 'tent', 'flag',
            'ball', 'kite', 'balloon', 'gift', 'candle', 'bottle', 'glasses',
            'spoon', 'fork', 'knife', 'plate', 'bowl', 'strawberry', 'ice cream'
        ];

        // Set up canvas
        ctx.strokeStyle = '#000';
        ctx.lineWidth = 5;
        ctx.lineCap = 'round';
        ctx.lineJoin = 'round';

        // Mouse events
        canvas.addEventListener('mousedown', startDrawing);
        canvas.addEventListener('mousemove', draw);
        canvas.addEventListener('mouseup', stopDrawing);
        canvas.addEventListener('mouseout', stopDrawing);

        // Touch events
        canvas.addEventListener('touchstart', handleTouch);
        canvas.addEventListener('touchmove', handleTouch);
        canvas.addEventListener('touchend', stopDrawing);

        function startDrawing(e) {
            isDrawing = true;
            const rect = canvas.getBoundingClientRect();
            ctx.beginPath();
            ctx.moveTo(e.clientX - rect.left, e.clientY - rect.top);
        }

        function draw(e) {
            if (!isDrawing) return;
            const rect = canvas.getBoundingClientRect();
            ctx.lineTo(e.clientX - rect.left, e.clientY - rect.top);
            ctx.stroke();
        }

        function stopDrawing() {
            isDrawing = false;
        }

        function handleTouch(e) {
            e.preventDefault();
            const touch = e.touches[0];
            const mouseEvent = new MouseEvent(e.type === 'touchstart' ? 'mousedown' : 'mousemove', {
                clientX: touch.clientX,
                clientY: touch.clientY
            });
            canvas.dispatchEvent(mouseEvent);
        }

        function clearCanvas() {
            ctx.fillStyle = 'white';
            ctx.fillRect(0, 0, canvas.width, canvas.height);
            document.getElementById('predictions').innerHTML = '<p style="color: #999; text-align: center; padding: 2rem;">Draw something and click "Guess My Drawing"!</p>';
            document.getElementById('resultMessage').innerHTML = '';
        }

        function newChallenge() {
            currentChallenge = drawingChallenges[Math.floor(Math.random() * drawingChallenges.length)];
            document.getElementById('challengeObject').textContent = currentChallenge.toUpperCase();
            clearCanvas();
        }

        async function guessDrawing() {
            if (!model) {
                document.getElementById('status').textContent = '‚ùå AI model not loaded yet';
                return;
            }

            document.getElementById('status').textContent = 'ü§î AI is thinking...';

            try {
                // Create a temporary image element
                const tempCanvas = document.createElement('canvas');
                const tempCtx = tempCanvas.getContext('2d');
                tempCanvas.width = 224;
                tempCanvas.height = 224;

                // Fill white background (important for MobileNet)
                tempCtx.fillStyle = 'white';
                tempCtx.fillRect(0, 0, 224, 224);

                // Draw the user's drawing scaled down
                tempCtx.drawImage(canvas, 0, 0, 224, 224);

                // Get predictions from MobileNet
                const predictions = await model.classify(tempCanvas);

                // Display predictions
                displayPredictions(predictions);

                // Check if any prediction matches the challenge
                const correctGuess = predictions.some(pred => 
                    pred.className.toLowerCase().includes(currentChallenge.toLowerCase()) ||
                    currentChallenge.toLowerCase().includes(pred.className.toLowerCase().split(',')[0].trim())
                );

                const resultDiv = document.getElementById('resultMessage');
                if (correctGuess) {
                    resultDiv.innerHTML = '<div class="result-message result-correct">üéâ Correct! AI guessed it!</div>';
                } else {
                    resultDiv.innerHTML = '<div class="result-message result-incorrect">‚ùå AI couldn\'t guess it. Try again or get a new challenge!</div>';
                }

                document.getElementById('status').textContent = '‚úÖ Done!';
            } catch (error) {
                console.error('Prediction error:', error);
                document.getElementById('status').textContent = '‚ùå Error making prediction';
            }
        }

        function displayPredictions(predictions) {
            const predictionsDiv = document.getElementById('predictions');
            predictionsDiv.innerHTML = predictions.slice(0, 5).map(pred => `
                <div class="prediction">
                    <div class="prediction-item">
                        <span class="prediction-label">${pred.className}</span>
                        <span class="prediction-confidence">${(pred.probability * 100).toFixed(1)}%</span>
                    </div>
                </div>
            `).join('');
        }

        // Load model
        async function loadModel() {
            try {
                document.getElementById('status').textContent = 'Loading AI model...';
                model = await mobilenet.load();
                document.getElementById('status').textContent = '‚úÖ AI Ready! Start drawing!';
                newChallenge();
                clearCanvas();
            } catch (error) {
                console.error('Error loading model:', error);
                document.getElementById('status').textContent = '‚ùå Error loading AI model';
            }
        }

        loadModel();
    </script>
</body>
</html>
